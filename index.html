<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TimeFinder - –£–º–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–æ—Å—É–≥–∞</title>
    <link rel="stylesheet" href="all.min.css">
    <link rel="stylesheet" href="styles.css">
    <script src="firebase-app-compat.js"></script>
    <script src="firebase-auth-compat.js"></script>
    <script src="firebase-database-compat.js"></script>
    <script src="firebase-config.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é -->
        <aside class="sidebar">
            <div class="logo">
                <i class="fas fa-compass"></i>
                <span>WhatToDo</span>
            </div>
            
            <nav class="main-nav">
                <a href="index.html" class="nav-item active" data-section="–≥–ª–∞–≤–Ω–∞—è">
                    <i class="fas fa-home"></i>
                    <span>–ì–ª–∞–≤–Ω–∞—è</span>
                </a>
                <a href="favorites.html" class="nav-item" data-section="–∏–∑–±—Ä–∞–Ω–Ω–æ–µ">
                    <i class="fas fa-heart"></i>
                    <span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
                </a>
                <a href="settings.html" class="nav-item" data-section="–Ω–∞—Å—Ç—Ä–æ–π–∫–∏">
                    <i class="fas fa-cog"></i>
                    <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </a>
            </nav>
            
            <div class="user-profile">
                <div class="avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-info">
                    <span class="username" id="usernameDisplay">–ì–æ—Å—Ç—å</span>
                    <span class="user-status">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</span>
                </div>
            </div>
        </aside>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
        <main class="main-content">
            <header class="main-header">
                <h1>–ß–µ–º –∑–∞–π–º—ë–º—Å—è —Å–µ–≥–æ–¥–Ω—è?</h1>
                <div class="auth-buttons" id="authButtons">
                    <a class="btn btn-outline" id="loginBtn" href="login.html">–í–æ–π—Ç–∏</a>
                    <a class="btn btn-primary" id="registerBtn" href="/register.html">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                </div>
                <div class="user-menu" id="userMenu" style="display: none;">
                    <button class="btn btn-icon" id="notificationsBtn">
                        <i class="fas fa-bell"></i>
                        <span class="badge">3</span>
                    </button>
                    <div class="user-avatar" id="userAvatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
            </header>

            <!-- –§–æ—Ä–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π -->
            <section class="preferences-card">
                <div class="card-header">
                    <h2><i class="fas fa-sliders-h"></i> –í–∞—à–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è</h2>
                    <button class="btn btn-icon">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
                
                <form id="preferencesForm" class="preferences-form">
                    <div class="form-row">
                        <div class="form-group mood-selector">
                            <label>–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</label>
                            <div class="mood-options">
                                <input type="radio" name="mood" id="mood-happy" value="happy" checked>
                                <label for="mood-happy" class="mood-option">
                                    <i class="fas fa-smile"></i>
                                    <span>–†–∞–¥–æ—Å—Ç–Ω–æ–µ</span>
                                </label>
                                
                                <input type="radio" name="mood" id="mood-neutral" value="neutral">
                                <label for="mood-neutral" class="mood-option">
                                    <i class="fas fa-meh"></i>
                                    <span>–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ</span>
                                </label>
                                
                                <input type="radio" name="mood" id="mood-sad" value="sad">
                                <label for="mood-sad" class="mood-option">
                                    <i class="fas fa-frown"></i>
                                    <span>–ì—Ä—É—Å—Ç–Ω–æ–µ</span>
                                </label>
                                
                                <input type="radio" name="mood" id="mood-energetic" value="energetic">
                                <label for="mood-energetic" class="mood-option">
                                    <i class="fas fa-bolt"></i>
                                    <span>–≠–Ω–µ—Ä–≥–∏—á–Ω–æ–µ</span>
                                </label>
                                
                                <input type="radio" name="mood" id="mood-relaxed" value="relaxed">
                                <label for="mood-relaxed" class="mood-option">
                                    <i class="fas fa-couch"></i>
                                    <span>–†–∞—Å—Å–ª–∞–±–ª–µ–Ω–Ω–æ–µ</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="time">–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –µ—Å—Ç—å (—á–∞—Å–æ–≤)</label>
                            <div class="range-slider">
                                <input type="range" id="time" min="1" max="12" value="2" step="1">
                                <div class="range-value"><span id="timeValue">2</span> —á</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="budget">–ë—é–¥–∂–µ—Ç</label>
                            <select id="budget" class="styled-select">
                                <option value="free">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</option>
                                <option value="low" selected>–ù–∏–∑–∫–∏–π (–¥–æ 1000 ‚ÇΩ)</option>
                                <option value="medium">–°—Ä–µ–¥–Ω–∏–π (1000-5000 ‚ÇΩ)</option>
                                <option value="high">–í—ã—Å–æ–∫–∏–π (–æ—Ç 5000 ‚ÇΩ)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="people">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª—é–¥–µ–π</label>
                            <select id="people" class="styled-select">
                                <option value="1">–û–¥–∏–Ω</option>
                                <option value="2">–î–≤–æ–µ</option>
                                <option value="3">–ù–µ—Å–∫–æ–ª—å–∫–æ (3-5)</option>
                                <option value="group">–ö–æ–º–ø–∞–Ω–∏—è (5+)</option>
                            </select>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-block btn-lg" style="margin-top: 32px;">
                        <i class="fas fa-magic"></i> –ù–∞–π—Ç–∏ –∏–¥–µ–∏
                    </button>
                </form>
            </section>

            <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ -->
            <section class="recommendations-section content-section" id="recommendationsSection" style="display: none;">
                <div class="section-header">
                    <h2><i class="fas fa-lightbulb"></i> –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –≤–∞—Å</h2>
                    <div class="sort-options">
                        <span>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</span>
                        <select class="styled-select small">
                            <option>–ü–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏</option>
                            <option>–ü–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏</option>
                            <option>–ü–æ –≤—Ä–µ–º–µ–Ω–∏</option>
                        </select>
                    </div>
                </div>
                <div class="recommendations-container" id="recommendationsContainer">
                    <div class="empty-state">
                        <i class="fas fa-search"></i>
                        <h3>–ù–∞–π–¥–∏—Ç–µ –∏–¥–µ–∏ –¥–ª—è –¥–æ—Å—É–≥–∞</h3>
                        <p>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –≤—ã—à–µ, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
    // –ü—Ä–∏–º–µ—Ä—ã –∏–¥–µ–π –¥–ª—è –¥–æ—Å—É–≥–∞
    const activities = [
        {
            name: "–ü–æ–π—Ç–∏ –ø–æ–≥—É–ª—è—Ç—å",
            description: "–ü—Ä–æ–≥—É–ª—è–π—Ç–µ—Å—å –≤ –ø–∞—Ä–∫–µ –∏–ª–∏ –ø–æ –≥–æ—Ä–æ–¥—É.",
            mood: ["happy", "neutral", "sad", "energetic", "relaxed"],
            time: 1,
            budget: "free",
            people: ["1", "2", "3", "group"]
        },
        {
            name: "–°—Ö–æ–¥–∏—Ç—å –≤ –∫–∏–Ω–æ",
            description: "–ü–æ—Å–µ—Ç–∏—Ç–µ –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä —Å –¥—Ä—É–∑—å—è–º–∏ –∏–ª–∏ —Å–µ–º—å—ë–π.",
            mood: ["happy", "neutral", "relaxed"],
            time: 2,
            budget: "medium",
            people: ["2", "3", "group"]
        },
        {
            name: "–ü–æ–∏–≥—Ä–∞—Ç—å –≤ –Ω–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã",
            description: "–°–æ–±–µ—Ä–∏—Ç–µ—Å—å —Å –¥—Ä—É–∑—å—è–º–∏ –∏ —É—Å—Ç—Ä–æ–π—Ç–µ –≤–µ—á–µ—Ä –Ω–∞—Å—Ç–æ–ª—å–Ω—ã—Ö –∏–≥—Ä.",
            mood: ["happy", "neutral", "relaxed"],
            time: 3,
            budget: "low",
            people: ["2", "3", "group"]
        },
        {
            name: "–ü–æ—á–∏—Ç–∞—Ç—å –∫–Ω–∏–≥—É",
            description: "–ü–æ–≥—Ä—É–∑–∏—Ç–µ—Å—å –≤ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—É—é –∫–Ω–∏–≥—É –¥–æ–º–∞ –∏–ª–∏ –≤ –∫–∞—Ñ–µ.",
            mood: ["relaxed", "sad", "neutral"],
            time: 2,
            budget: "free",
            people: ["1"]
        },
        {
            name: "–ü–æ–π—Ç–∏ –Ω–∞ –ø—Ä–æ–±–µ–∂–∫—É",
            description: "–ü—Ä–æ–±–µ–∂–∫–∞ –Ω–∞ —Å–≤–µ–∂–µ–º –≤–æ–∑–¥—É—Ö–µ –∑–∞—Ä—è–¥–∏—Ç —ç–Ω–µ—Ä–≥–∏–µ–π.",
            mood: ["energetic", "happy"],
            time: 1,
            budget: "free",
            people: ["1", "2"]
        },
        {
            name: "–°—Ö–æ–¥–∏—Ç—å –≤ –∫–∞—Ñ–µ",
            description: "–í—Å—Ç—Ä–µ—Ç—å—Ç–µ—Å—å —Å –¥—Ä—É–≥–æ–º –∏–ª–∏ —Å–µ–º—å—ë–π –≤ —É—é—Ç–Ω–æ–º –∫–∞—Ñ–µ.",
            mood: ["happy", "relaxed"],
            time: 2,
            budget: "medium",
            people: ["2", "3", "group"]
        },
        {
            name: "–ü–æ—Å–µ—Ç–∏—Ç—å –≤—ã—Å—Ç–∞–≤–∫—É –∏–ª–∏ –º—É–∑–µ–π",
            description: "–£–∑–Ω–∞–π—Ç–µ —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ –∏ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–µ–µ.",
            mood: ["neutral", "relaxed"],
            time: 2,
            budget: "low",
            people: ["1", "2", "3"]
        },
        {
            name: "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ñ–∏–ª—å–º –¥–æ–º–∞",
            description: "–£—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–∞—à–Ω–∏–π –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä —Å –ø–æ–ø–∫–æ—Ä–Ω–æ–º.",
            mood: ["relaxed", "sad", "neutral"],
            time: 2,
            budget: "free",
            people: ["1", "2", "3", "group"]
        }
    ];

    // –ü–æ–∫–∞–∑–∞—Ç—å —Å–µ–∫—Ü–∏—é
    function showSection(sectionId) {
        // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–µ–∫—Ü–∏–∏
        document.querySelectorAll('.content-section').forEach(section => {
            section.style.display = 'none';
        });
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é —Å–µ–∫—Ü–∏—é
        const section = document.getElementById(sectionId);
        if (section) {
            section.style.display = 'block';
        }
    }

    // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
    function getBudgetText(budget) {
        const budgets = {
            free: "–ë–µ—Å–ø–ª–∞—Ç–Ω–æ",
            low: "–ù–∏–∑–∫–∏–π",
            medium: "–°—Ä–µ–¥–Ω–∏–π",
            high: "–í—ã—Å–æ–∫–∏–π"
        };
        return budgets[budget] || budget;
    }

    function getPeopleText(people) {
        if (Array.isArray(people)) {
            if (people.includes('group')) return '–î–ª—è –∫–æ–º–ø–∞–Ω–∏–∏';
            if (people.includes('3')) return '–î–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö';
            if (people.includes('2')) return '–î–ª—è –¥–≤–æ–∏—Ö';
            return '–î–ª—è –æ–¥–Ω–æ–≥–æ';
        } else {
            if (people === 'group') return '–î–ª—è –∫–æ–º–ø–∞–Ω–∏–∏';
            if (people === '3') return '–î–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö';
            if (people === '2') return '–î–ª—è –¥–≤–æ–∏—Ö';
            return '–î–ª—è –æ–¥–Ω–æ–≥–æ';
        }
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
    function updateRecommendations() {
        // –í—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–∫—Ü–∏—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
        showSection('recommendationsSection');
        
        let mood = document.querySelector('input[name="mood"]:checked').value;
        let time = parseInt(document.getElementById('time').value);
        let budget = document.getElementById('budget').value;
        let people = document.getElementById('people').value;
        
        const container = document.getElementById('recommendationsContainer');
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º loader
        let loader = document.createElement('div');
        loader.className = 'loader';
        loader.innerHTML = '<div class="loader-spinner"></div><p>–ò—â–µ–º –ª—É—á—à–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã...</p>';
        container.innerHTML = '';
        container.appendChild(loader);
        
        // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–ª—è UX
        setTimeout(() => {
            let filtered = activities.filter(act => 
                act.mood.includes(mood) &&
                act.time <= time &&
                (budget === 'any' || act.budget === budget) &&
                (people === 'any' || act.people.includes(people))
            );
            
            if (filtered.length > 0) {
                let html = '';
                filtered.forEach(activity => {
                    html += `
                        <div class="activity-card fade-in" data-id="${activity.id}">
                            <h3>${activity.name}</h3>
                            <p>${activity.description}</p>
                            <div class="activity-meta">
                                <span><i class="fas fa-clock"></i> ${activity.time} —á</span>
                                <span><i class="fas fa-wallet"></i> ${getBudgetText(activity.budget)}</span>
                                <span><i class="fas fa-users"></i> ${getPeopleText(activity.people)}</span>
                            </div>
                        </div>
                    `;
                });
                container.innerHTML = html;
            } else {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-search"></i>
                        <h3>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
                        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
                    </div>
                `;
            }
        }, 800);
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–æ—Ä–º—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
    function initRecommendations() {
        const form = document.getElementById('preferencesForm');
        if (!form) return;
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
        const timeInput = document.getElementById('time');
        if (timeInput) {
            timeInput.addEventListener('input', function() {
                document.getElementById('timeValue').textContent = this.value;
            });
        }
        
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            updateRecommendations();
        });
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', function() {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        const savedUser = localStorage.getItem('currentUser');
        if (savedUser) {
            const user = JSON.parse(savedUser);
            document.getElementById('usernameDisplay').textContent = user.name;
            document.getElementById('authButtons').style.display = 'none';
            document.getElementById('userMenu').style.display = 'flex';
            
            // –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å
            console.log(`üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${user.name}! –í—ã —É—Å–ø–µ—à–Ω–æ –≤–æ—à–ª–∏ –≤ —Å–∏—Å—Ç–µ–º—É.`);
        }

        initRecommendations();
        
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
        document.getElementById('timeValue').textContent = 
            document.getElementById('time').value;
    });
    </script>
</body>
</html>